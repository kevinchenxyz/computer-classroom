{"version":3,"file":"information.js","sources":["src/conf.js","src/information.js"],"sourcesContent":["export const getConfig = () => {\n    const confData = {\n        'path': {\n            // computerClassroom: \"http://192.168.1.59/zf2/kurogo_wzu_push/public/api/computer\"\n            computerClassroom: \"http://192.168.1.207/push/api/computer\"\n            // computerClassroom: \"http://140.127.170.153/push/api/computer\"\n            // computerClassroom: \"http://140.127.170.14/push/api/computer\"\n        }\n    };\n    return confData;\n};\n\nexport const formatMacaddress = function (ipobj) {\n    var rtdata='';\n    Object.keys(ipobj).forEach(function (ifname) {\n      var alias = 0;\n      ipobj[ifname].forEach(function (iface) {\n        if ('IPv4' !== iface.family || iface.internal !== false) {\n          // skip over internal (i.e. 127.0.0.1) and non-ipv4 addresses\n          return;\n        }\n        if (alias >= 1) {\n          // this single interface has multiple ipv4 addresses\n          rtdata += iface.mac;\n          // console.log(ifname + ':' + alias, iface.address);\n        } else {\n          // this interface has only one ipv4 adress\n          // console.log(ifname, iface.address);\n          rtdata += iface.mac;\n        }\n        ++alias;\n      });\n    });\n    return rtdata;\n}\n\nexport const secretConf = () => {\n    const adminData = {\n        'account':  'wzuadmin',\n        'pwd': 'wzu073426031'\n    }\n    return adminData;\n};\n\n\n// export const Language_en_us = {\n//     'title': 'Information About Your Computer',\n//     'ip_address': 'IP Address',\n//     'mac_address': 'MAC Address',\n//     'computer_name': 'Computer Name',\n//     'memory': 'Memory',\n//     'screen_resolution': 'Screen Resolution',\n//     'windows_version': 'Windows Version',\n//     'cpu': 'CPU',\n//     'hotfix': 'HotFix Imformations',\n// };","\nimport { getConfig, secretConf, formatMacaddress } from './conf.js';\nimport path from 'path';\nimport url from 'url';\nimport { app, BrowserWindow, remote, screen, dialog} from 'electron';\n\n\n\nconst os = require('os');\n\nconst {exec} = require('child_process');\n\nvar registeredPath = getConfig().path.computerClassroom;\n\nconst Config = require('electron-config');// 設定參數\nvar config = new Config();\nconst account = config.get('account');//使用者資訊\nvar defParamet = config.get('defParamet');//電腦教室參數\nconsole.log(defParamet);\n\nvar adminconf = secretConf();\nconsole.log(adminconf);\n\nvar seterrormsg = function (type) {\n  var filename = [\n    'errormsg.html',\n    'timendmsg.html',\n    'stopError.html',//停借用的錯誤\n    'stopeRecheck.html',//停借用的二次確認\n  ];\n  const BrowserWindow = require('electron').remote.BrowserWindow;\n    var winindex = new BrowserWindow({\n      width: 550,\n      height: 100, \n      title:'error',\n      frame: true,\n      autoHideMenuBar: true,\n      alwaysOnTop:true, // 視窗置頂\n    });\n    winindex.loadURL(url.format({\n      pathname: path.join(__dirname, filename[type]),\n      protocol: 'file:',\n      slashes: true,\n    }));\n    // winindex.openDevTools();\n    setTimeout( () => {\n      winindex.close();\n    } , 12000);\n};\n\nvar alertcount = 0;\nvar endMinCount = 0;\nvar alertcheck = true;\nvar setMsg;\nvar questBorrowingTime = function (account) {\n  var recheckPath = getConfig().path.computerClassroom;\n  var sendData = {\n    action: \"loan\",\n    user_uid: account,\n    computer_mac: formatMacaddress(os.networkInterfaces()),\n  };\n  console.log(recheckPath);\n  console.log(sendData);\n  sendData = JSON.stringify(sendData);\n  $.ajax({\n    method: \"POST\",\n    url: recheckPath,\n    data: sendData,\n    contentType: 'application/json; charset=utf-8',\n  })\n  .done(function( data ) {\n\n    if (account === adminconf.account) { // testcode-hide\n      data.etime = 999,\n      data.period = '管理模式',\n      data.update_status = true; \n    }\n    console.log('done');\n    console.log(data);\n    data.etime = Number(data.etime); \n    endMinCount = 0;\n    if(data.update_status){\n      config.set('loan_id',data.loan_id);\n      const advanceWarningTime = Number(defParamet.advanceWarningTime);\n      const advanceWarningFreq = Number(defParamet.advanceWarningFreq);\n      if (data.etime === advanceWarningTime && alertcheck ) {\n        console.log('run error');\n        alertcheck = false;\n        alertcount = advanceWarningFreq * 60000;\n        setMsg = setInterval( () => {\n          // console.log('testcodes');//test\n          seterrormsg(1);\n          // window.alert('借用即將結束，如需續借請點選續借按鈕！');\n        }, alertcount);// 定時詢問\n      }\n      if(data.etime < advanceWarningTime ) {\n        // remindEndMsg5\n        seterrormsg(1);//借用結束\n        // window.alert('借用時間即將結束，請儘速保存您的資料！');\n        document.querySelector('#remindEndMsg').innerHTML =  '借用即將結束，請在剩餘三分鐘前進行續借！';\n      } else if (data.etime < 1 || data.etime === 0 ) {\n        clearInterval(raiseHands);\n        setTimeout(function () {\n          // var winLockCommand = 'shutdown -L';//登出\n          var winLockCommand = 'shutdown -r -t 5';// 重開機\n          exec(winLockCommand);\n        }, Number(defParamet.bufferTime));\n      } else {\n        if(data.etime > advanceWarningTime) {\n          console.log('no setmsg');\n          if(setMsg){\n            clearInterval(setMsg);\n            setMsg = null;\n          }\n          alertcheck = true;\n        }\n      }\n      console.log(data.etime);\n      console.log(defParamet.renewStopTime);\n      \n      if ( data.etime < defParamet.renewStopTime ) {\n        $('#renewBtn').hide();\n        $('#logout').hide();\n        \n        document.querySelector('#remindEndMsg').innerHTML =  '借用即將結束，請儘速儲存您的作業！';\n      }\n      // console.log(defParamet.renewTime);\n      // console.log(defParamet.renewStopTime);\n      if( data.etime <= defParamet.renewTime && data.etime > defParamet.renewStopTime ){// 續借按鈕\n        console.log('續借、停止按鈕');\n        $('#renewBtn').css({'display': 'inline'});\n      }\n      if (account === adminconf.account) { // testcode-hide\n        $('#renewBtn').hide();\n        $('#logout').hide(); \n        // $('#temDep').hide();\n      }\n      document.querySelector('#screen').innerHTML =  '借用時間:' + data.period;\n      document.querySelector('#endtime').innerHTML =  '剩餘時間:' + data.etime + '分鐘';\n    } else {\n      //系統錯誤\n      // if (endMinCount ===  3)) {\n      // //回傳狀態失敗即為非借用狀態\n      //   var winLockCommand = 'shutdown -L';//登出\n      //   exec(winLockCommand);\n      // }\n      if( account !== adminconf.account) {\n        console.log('借用狀態錯誤重開 ');\n\n        seterrormsg(0);\n        setTimeout( function () {\n          // var winLockCommand = 'shutdown -L';//登出\n          var winLockCommand = 'shutdown -r -t 5';// 重開機\n          exec(winLockCommand);\n        }, Number(defParamet.noBorrow));\n        endMinCount += 1;\n      }\n      \n    }\n  })\n  .fail(function( msg ) {\n    console.log('fail');\n    // console.log(defParamet.faultTolerantErrMsg);\n    // console.log(msg);\n    if (endMinCount >= Number(defParamet.faultTolerantErrMsg)) {\n      seterrormsg(0);//系統錯誤\n    }\n    if (endMinCount === Number(defParamet.faultTolerant)) {\n      //超過三次詢問皆斷線 \n      console.log('超過三次詢問皆斷線');\n      var winLockCommand = 'shutdown -r -t 5';// 重開機\n      // var winLockCommand = 'shutdown -L';//登出\n      exec(winLockCommand);\n    }\n    endMinCount += 1;\n  });\n};\n\nvar logoutCount = false; // 停止借用確認\n// var resetLogoutCount = () => { // 重設確認變數\n//   setTimeout( () => {\n//     $('#logout').removeClass('btn-danger');\n//     $('#logout').addClass('btn-primary');\n//     logoutCount = false;    \n//   }, 10000);\n// };\n\nvar sendLogout = () => {\n    // 停止借用+登出\n    var registeredPath = getConfig().path.computerClassroom;\n    var sendData = {\n          action: 'register',\n          // computer_id: Number(numberval),\n          computer_mac: formatMacaddress(os.networkInterfaces()),\n        };\n    console.log(sendData);\n    \n    sendData = JSON.stringify(sendData);\n    $.ajax({\n      method: \"POST\",\n      url: registeredPath,\n      data: sendData,\n      contentType: 'application/json; charset=utf-8',\n    })\n    .done(function( data ) {\n      if(data.update_status){\n        console.log('註冊完成!');\n      }else{\n        seterrormsg(0);//系統錯誤\n      }\n    })\n    .fail(function( msg ) {\n      seterrormsg(0);//系統錯誤\n    });\n}\n\nvar renew = (account) => {\n  // 續借\n  var loan_id = config.get('loan_id');\n  var registeredPath = getConfig().path.computerClassroom;\n  var sendData = {\n        action: 'renew',\n        user_uid: account,\n        computer_mac: formatMacaddress(os.networkInterfaces()),\n        loan_id: loan_id\n      };\n  console.log(sendData);\n  sendData = JSON.stringify(sendData);\n  $.ajax({\n    method: \"POST\",\n    url: registeredPath,\n    data: sendData,\n    contentType: 'application/json; charset=utf-8',\n  })\n  .done(function( data ) {\n    // console.log(data);\n    if(data.renew_status){\n      // console.log('續借完成!');\n      questBorrowingTime(account);\n      $('#renewBtn').hide();\n      $('#remindEndMsg').after( '<div id=\"renewmsg\">續借完成!</div>' );\n      setTimeout( () => {\n        $('div').remove('#renewmsg');\n      } , 7000);\n      // window.alert('續借完成','續借成功');\n    }else{\n      seterrormsg(0);\n      // window.alert(data.message,'續借失敗！');\n    }\n  })\n  .fail(function( msg ) {\n    seterrormsg(0);\n    // window.alert('系統錯誤，請聯絡管理人員','續借失敗！');\n  });\n}\n\nvar stopUse = () => {\n  var loan_id = config.get('loan_id');\n  var registeredPath = getConfig().path.computerClassroom;\n  var sendData = {\n        action: 'stop',\n        user_uid: account,\n        computer_mac: formatMacaddress(os.networkInterfaces()),\n        loan_id: loan_id\n      };\n  console.log(sendData);\n  sendData = JSON.stringify(sendData);\n  $.ajax({\n    method: \"POST\",\n    url: registeredPath,\n    data: sendData,\n    contentType: 'application/json; charset=utf-8',\n  })\n  .done(function( data ) {\n    console.log(data);\n    if(data.update_status){\n      console.log('已停止借用');\n      var winLockCommand = 'shutdown -r -t 5';//重開機\n      exec(winLockCommand);\n    } else {\n      seterrormsg(2);\n      // window.alert('請再次點選停止借用或聯繫管理員','停用失敗！');\n    }\n  })\n  .fail(function( msg ) {\n    seterrormsg(0);\n    // window.alert('系統錯誤，請聯絡管理人員','停用失敗！');\n  });\n};\n\n\n$(document).ready(function(){\n  questBorrowingTime(account);\n  var reqFreq = Number(defParamet.reqFreq);\n  // console.log(reqFreq);\n  // reqFreq = 10000;//test\n  var raiseHands = setInterval( () => {\n    console.log('raiseHands');\n    questBorrowingTime(account);\n  }, reqFreq);// 定時詢問\n  var reciprocal;\n  $('#logout').click( () => {\n    // if(!logoutCount) {\n      seterrormsg(3);\n      // window.alert('點選確認定，請再次點選『停止借用』按鈕，確定停止本機所有(含續借)借用！');\n      logoutCount = true;\n      $('#logout').hide();\n      $('#keep').css({'display': 'inline'});\n      // $('#logout').removeClass('btn-primary');\n      // $('#logout').addClass('btn-danger');\n      // resetLogoutCount();\n      reciprocal = setTimeout( () => {\n          // $('#logout').removeClass('btn-danger');\n          // $('#logout').addClass('btn-primary');\n          $('#logout').css({'display': 'inline'});\n           $('#keep').hide();\n          logoutCount = false; \n          stopUse();          \n        }, 11000);\n    // } else if (logoutCount) {\n      // stopUse();\n    // }\n  });\n//   var id = setTimeout(function(){alert('hi');}, 3000);\n// clearTimeout(id);\n  $('#keep').click( () => {\n    logoutCount = false;\n    $('#logout').css({'display': 'inline'});\n    $('#keep').hide();\n    clearTimeout(reciprocal);\n  });\n\n  $('#temDep').click(function () {\n    // const BrowserWindow = require('electron').remote.BrowserWindow;\n    // let win = new BrowserWindow({\n    //   width: 850, \n    //   height: 600, \n    //   frame: true, //上方選單tool\n    //   fullscreen: true,\n    //   title: '文藻電腦教室-登入',\n    //   autoHideMenuBar: true,\n    //   type: 'desktop',\n    //   // closable: false, //視窗不可手動關閉(按X沒c動作)\n    // });\n    // win.loadURL(url.format({\n    //   pathname: path.join(__dirname, 'app.html'),\n    //   protocol: 'file:',\n    //   slashes: true,\n    // }));\n    var winLockCommand = 'rundll32.exe user32.dll, LockWorkStation';//鎖 螢幕\n    exec(winLockCommand);\n    // var InformationPage = remote.getCurrentWindow(); // 取得bkg的登入頁面設定\n    // InformationPage.close(); // 關閉頁面\n  });\n\n  $('#renewBtn').click('on', () => {\n    console.log(account);\n    renew(account);\n  });\n\n  document.querySelector('#screen').innerHTML =  '借用時間(time): 確認中...';\n  document.querySelector('#endtime').innerHTML =  '剩餘時間(timing): 確認中...';\n  document.querySelector('#remind').innerHTML =  '請將本視窗縮小';\n  document.querySelector('#username').innerHTML =  '使用者(Account)：' + account;\n});\n"],"names":["BrowserWindow"],"mappings":";;;;;;;;AAAO,MAAM,SAAS,GAAG,MAAM;IAC3B,MAAM,QAAQ,GAAG;QACb,MAAM,EAAE;;YAEJ,iBAAiB,EAAE,wCAAwC;;;SAG9D;KACJ,CAAC;IACF,OAAO,QAAQ,CAAC;CACnB,CAAC;;AAEF,AAAO,MAAM,gBAAgB,GAAG,UAAU,KAAK,EAAE;IAC7C,IAAI,MAAM,CAAC,EAAE,CAAC;IACd,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;MAC3C,IAAI,KAAK,GAAG,CAAC,CAAC;MACd,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE;QACrC,IAAI,MAAM,KAAK,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,QAAQ,KAAK,KAAK,EAAE;;UAEvD,OAAO;SACR;QACD,IAAI,KAAK,IAAI,CAAC,EAAE;;UAEd,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC;;SAErB,MAAM;;;UAGL,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC;SACrB;QACD,EAAE,KAAK,CAAC;OACT,CAAC,CAAC;KACJ,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;EACjB;;AAED,AAAO,MAAM,UAAU,GAAG,MAAM;IAC5B,MAAM,SAAS,GAAG;QACd,SAAS,GAAG,UAAU;QACtB,KAAK,EAAE,cAAc;MACxB;IACD,OAAO,SAAS,CAAC;CACpB,CAAC;;;;;;;;;;;;;;;KAaG,LC/CL,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAEzB,MAAM,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;;AAExC,AAEA,MAAM,MAAM,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAC1C,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;AAC1B,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACtC,IAAI,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC1C,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;;AAExB,IAAI,SAAS,GAAG,UAAU,EAAE,CAAC;AAC7B,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;;AAEvB,IAAI,WAAW,GAAG,UAAU,IAAI,EAAE;EAChC,IAAI,QAAQ,GAAG;IACb,eAAe;IACf,gBAAgB;IAChB,gBAAgB;IAChB,mBAAmB;GACpB,CAAC;EACF,MAAMA,gBAAa,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC;IAC7D,IAAI,QAAQ,GAAG,IAAIA,gBAAa,CAAC;MAC/B,KAAK,EAAE,GAAG;MACV,MAAM,EAAE,GAAG;MACX,KAAK,CAAC,OAAO;MACb,KAAK,EAAE,IAAI;MACX,eAAe,EAAE,IAAI;MACrB,WAAW,CAAC,IAAI;KACjB,CAAC,CAAC;IACH,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;MAC1B,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;MAC9C,QAAQ,EAAE,OAAO;MACjB,OAAO,EAAE,IAAI;KACd,CAAC,CAAC,CAAC;;IAEJ,UAAU,EAAE,MAAM;MAChB,QAAQ,CAAC,KAAK,EAAE,CAAC;KAClB,GAAG,KAAK,CAAC,CAAC;CACd,CAAC;;AAEF,IAAI,UAAU,GAAG,CAAC,CAAC;AACnB,IAAI,WAAW,GAAG,CAAC,CAAC;AACpB,IAAI,UAAU,GAAG,IAAI,CAAC;AACtB,IAAI,MAAM,CAAC;AACX,IAAI,kBAAkB,GAAG,UAAU,OAAO,EAAE;EAC1C,IAAI,WAAW,GAAG,SAAS,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC;EACrD,IAAI,QAAQ,GAAG;IACb,MAAM,EAAE,MAAM;IACd,QAAQ,EAAE,OAAO;IACjB,YAAY,EAAE,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC;GACvD,CAAC;EACF,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;EACzB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACtB,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EACpC,CAAC,CAAC,IAAI,CAAC;IACL,MAAM,EAAE,MAAM;IACd,GAAG,EAAE,WAAW;IAChB,IAAI,EAAE,QAAQ;IACd,WAAW,EAAE,iCAAiC;GAC/C,CAAC;GACD,IAAI,CAAC,UAAU,IAAI,GAAG;;IAErB,IAAI,OAAO,KAAK,SAAS,CAAC,OAAO,EAAE;MACjC,IAAI,CAAC,KAAK,GAAG,GAAG;MAChB,IAAI,CAAC,MAAM,GAAG,MAAM;MACpB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;KAC3B;IACD,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAClB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,WAAW,GAAG,CAAC,CAAC;IAChB,GAAG,IAAI,CAAC,aAAa,CAAC;MACpB,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;MACnC,MAAM,kBAAkB,GAAG,MAAM,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;MACjE,MAAM,kBAAkB,GAAG,MAAM,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;MACjE,IAAI,IAAI,CAAC,KAAK,KAAK,kBAAkB,IAAI,UAAU,GAAG;QACpD,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACzB,UAAU,GAAG,KAAK,CAAC;QACnB,UAAU,GAAG,kBAAkB,GAAG,KAAK,CAAC;QACxC,MAAM,GAAG,WAAW,EAAE,MAAM;;UAE1B,WAAW,CAAC,CAAC,CAAC,CAAC;;SAEhB,EAAE,UAAU,CAAC,CAAC;OAChB;MACD,GAAG,IAAI,CAAC,KAAK,GAAG,kBAAkB,GAAG;;QAEnC,WAAW,CAAC,CAAC,CAAC,CAAC;;QAEf,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,SAAS,IAAI,sBAAsB,CAAC;OAC7E,MAAM,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,GAAG;QAC9C,aAAa,CAAC,UAAU,CAAC,CAAC;QAC1B,UAAU,CAAC,YAAY;;UAErB,IAAI,cAAc,GAAG,kBAAkB,CAAC;UACxC,IAAI,CAAC,cAAc,CAAC,CAAC;SACtB,EAAE,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC;OACnC,MAAM;QACL,GAAG,IAAI,CAAC,KAAK,GAAG,kBAAkB,EAAE;UAClC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;UACzB,GAAG,MAAM,CAAC;YACR,aAAa,CAAC,MAAM,CAAC,CAAC;YACtB,MAAM,GAAG,IAAI,CAAC;WACf;UACD,UAAU,GAAG,IAAI,CAAC;SACnB;OACF;MACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACxB,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;;MAEtC,KAAK,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,aAAa,GAAG;QAC3C,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;;QAEpB,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,SAAS,IAAI,mBAAmB,CAAC;OAC1E;;;MAGD,IAAI,IAAI,CAAC,KAAK,IAAI,UAAU,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,aAAa,EAAE;QAC/E,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,CAAC,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;OAC3C;MACD,IAAI,OAAO,KAAK,SAAS,CAAC,OAAO,EAAE;QACjC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;;OAErB;MACD,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,SAAS,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;MACrE,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,SAAS,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;KAC7E,MAAM;;;;;;;MAOL,IAAI,OAAO,KAAK,SAAS,CAAC,OAAO,EAAE;QACjC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;;QAEzB,WAAW,CAAC,CAAC,CAAC,CAAC;QACf,UAAU,EAAE,YAAY;;UAEtB,IAAI,cAAc,GAAG,kBAAkB,CAAC;UACxC,IAAI,CAAC,cAAc,CAAC,CAAC;SACtB,EAAE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChC,WAAW,IAAI,CAAC,CAAC;OAClB;;KAEF;GACF,CAAC;GACD,IAAI,CAAC,UAAU,GAAG,GAAG;IACpB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;;IAGpB,IAAI,WAAW,IAAI,MAAM,CAAC,UAAU,CAAC,mBAAmB,CAAC,EAAE;MACzD,WAAW,CAAC,CAAC,CAAC,CAAC;KAChB;IACD,IAAI,WAAW,KAAK,MAAM,CAAC,UAAU,CAAC,aAAa,CAAC,EAAE;;MAEpD,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;MACzB,IAAI,cAAc,GAAG,kBAAkB,CAAC;;MAExC,IAAI,CAAC,cAAc,CAAC,CAAC;KACtB;IACD,WAAW,IAAI,CAAC,CAAC;GAClB,CAAC,CAAC;CACJ,CAAC;;AAEF,IAAI,WAAW,GAAG,KAAK,CAAC;AACxB,AAqCA,IAAI,KAAK,GAAG,CAAC,OAAO,KAAK;;EAEvB,IAAI,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;EACpC,IAAI,cAAc,GAAG,SAAS,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC;EACxD,IAAI,QAAQ,GAAG;QACT,MAAM,EAAE,OAAO;QACf,QAAQ,EAAE,OAAO;QACjB,YAAY,EAAE,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC;QACtD,OAAO,EAAE,OAAO;OACjB,CAAC;EACN,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACtB,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EACpC,CAAC,CAAC,IAAI,CAAC;IACL,MAAM,EAAE,MAAM;IACd,GAAG,EAAE,cAAc;IACnB,IAAI,EAAE,QAAQ;IACd,WAAW,EAAE,iCAAiC;GAC/C,CAAC;GACD,IAAI,CAAC,UAAU,IAAI,GAAG;;IAErB,GAAG,IAAI,CAAC,YAAY,CAAC;;MAEnB,kBAAkB,CAAC,OAAO,CAAC,CAAC;MAC5B,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;MACtB,CAAC,CAAC,eAAe,CAAC,CAAC,KAAK,EAAE,gCAAgC,EAAE,CAAC;MAC7D,UAAU,EAAE,MAAM;QAChB,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;OAC9B,GAAG,IAAI,CAAC,CAAC;;KAEX,IAAI;MACH,WAAW,CAAC,CAAC,CAAC,CAAC;;KAEhB;GACF,CAAC;GACD,IAAI,CAAC,UAAU,GAAG,GAAG;IACpB,WAAW,CAAC,CAAC,CAAC,CAAC;;GAEhB,CAAC,CAAC;EACJ;;AAED,IAAI,OAAO,GAAG,MAAM;EAClB,IAAI,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;EACpC,IAAI,cAAc,GAAG,SAAS,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC;EACxD,IAAI,QAAQ,GAAG;QACT,MAAM,EAAE,MAAM;QACd,QAAQ,EAAE,OAAO;QACjB,YAAY,EAAE,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC;QACtD,OAAO,EAAE,OAAO;OACjB,CAAC;EACN,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACtB,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EACpC,CAAC,CAAC,IAAI,CAAC;IACL,MAAM,EAAE,MAAM;IACd,GAAG,EAAE,cAAc;IACnB,IAAI,EAAE,QAAQ;IACd,WAAW,EAAE,iCAAiC;GAC/C,CAAC;GACD,IAAI,CAAC,UAAU,IAAI,GAAG;IACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAClB,GAAG,IAAI,CAAC,aAAa,CAAC;MACpB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;MACrB,IAAI,cAAc,GAAG,kBAAkB,CAAC;MACxC,IAAI,CAAC,cAAc,CAAC,CAAC;KACtB,MAAM;MACL,WAAW,CAAC,CAAC,CAAC,CAAC;;KAEhB;GACF,CAAC;GACD,IAAI,CAAC,UAAU,GAAG,GAAG;IACpB,WAAW,CAAC,CAAC,CAAC,CAAC;;GAEhB,CAAC,CAAC;CACJ,CAAC;;;AAGF,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,UAAU;EAC1B,kBAAkB,CAAC,OAAO,CAAC,CAAC;EAC5B,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;;;EAGzC,IAAI,UAAU,GAAG,WAAW,EAAE,MAAM;IAClC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAC1B,kBAAkB,CAAC,OAAO,CAAC,CAAC;GAC7B,EAAE,OAAO,CAAC,CAAC;EACZ,IAAI,UAAU,CAAC;EACf,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,MAAM;;MAEtB,WAAW,CAAC,CAAC,CAAC,CAAC;;MAEf,WAAW,GAAG,IAAI,CAAC;MACnB,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;MACpB,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;;;;MAItC,UAAU,GAAG,UAAU,EAAE,MAAM;;;UAG3B,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;WACvC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;UACnB,WAAW,GAAG,KAAK,CAAC;UACpB,OAAO,EAAE,CAAC;SACX,EAAE,KAAK,CAAC,CAAC;;;;GAIf,CAAC,CAAC;;;EAGH,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,MAAM;IACtB,WAAW,GAAG,KAAK,CAAC;IACpB,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;IAClB,YAAY,CAAC,UAAU,CAAC,CAAC;GAC1B,CAAC,CAAC;;EAEH,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,YAAY;;;;;;;;;;;;;;;;;IAiB7B,IAAI,cAAc,GAAG,0CAA0C,CAAC;IAChE,IAAI,CAAC,cAAc,CAAC,CAAC;;;GAGtB,CAAC,CAAC;;EAEH,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM;IAC/B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACrB,KAAK,CAAC,OAAO,CAAC,CAAC;GAChB,CAAC,CAAC;;EAEH,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,SAAS,IAAI,oBAAoB,CAAC;EACpE,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,SAAS,IAAI,sBAAsB,CAAC;EACvE,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC;EACzD,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,SAAS,IAAI,eAAe,GAAG,OAAO,CAAC;CAC5E,CAAC,CAAC"}